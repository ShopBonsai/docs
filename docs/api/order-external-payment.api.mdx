---
id: order-external-payment
title: "Order - External Payment"
description: "Place an order through Bonsai's API - External payment method."
sidebar_label: "Order - External Payment"
hide_title: true
hide_table_of_contents: true
api: {"tags":["Order"],"description":"Place an order through Bonsai's API - External payment method.\n\nPartners who have access to our own Product Catalog and charge customers directly could use this endpoint to create/fulfill orders.\n\n## Requirements\n\n⚠️ This endpoint is available to select partners, please reach out to your account manager to discuss the API integration details\n\n- The information in the field `products` must match what was used to validate the product in the checkout request.\n- The information in the field `shipping_address` should match what was used to validate the address in the checkout request.\n- Email should be a valid email address used by the customer\n- Token should link to your own internal order\n    - This token is used to verify the order status in your system for security reasons.\n- Amounts are the costs charged to the customer\n- you can provide any additional data in `misc.data`\n- This endpoint is only available to servers for security reasons\n    \n\n## Errors\n\nErrors are returned with status code 200, containing the error inside the errors array. This is in order to allow greater interoperability with integrators.\n\n| **Reason** | **Code** | **HTTP Code** |\n| --- | --- | --- |\n| Merchant does not ship to country | INTERNATIONAL_SHIPPING_ERROR | 400 Bad Request |\n| Fields are missing from the request | INVALID_INPUT | 400 Bad Request |\n| Not enough inventory | INSUFFICIENT_INVENTORY | 400 Bad Request |\n| Merchant does not ship to country | INTERNATIONAL_SHIPPING_ERROR | 400 Bad Request |\n| Product does not exist | PRODUCT_DOES_NOT_EXIST | 404 Not Found |\n| Variant does not exist | VARIANT_DOES_NOT_EXIST | 404 Not Found |\n| Failed to verify the provided token | PAYMENT_REQUIRED | 402 Payment Required |","requestBody":{"content":{"application/json":{"schema":{"type":"object","example":{"customer":{"first_name":"<First name>","last_name":"<Last name>","email":"<Email address>"},"products":[{"public_id":"<product ID>","variant_id":"<product variant ID>","quantity":1}],"shipping_address":{"first_name":"<First name>","last_name":"<Last name>","name":"<Full name>","address1":"<Address line>","address2":"<Optional>","city":"<City name>","country":"<Two-letter Alpha-2 ISO 3166 country code>","province":"<Province>","phone":"<Phone number>","zip":"<Zip code>"},"payment":{"method":"external payment","token":"<Token>","amounts":{"shipping":"<Shipping cost>","taxes":"<Taxes cost>","goods":"<Goods cost>"}},"misc":{"data":{}}}}}}},"parameters":[{"name":"Content-Type","in":"header","schema":{"type":"string"},"description":"Only allowed content-type","example":"application/json"},{"name":"API-Key","in":"header","schema":{"type":"string"},"description":"API key provided by your account manager","example":"{{API Key}}"},{"name":"RootPathOrders","in":"path","schema":{"type":"string"},"required":true}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"},"example":{"data":{"email":"bob.bobsen@gmail.com","shipping_address":{"first_name":"Bob","last_name":"Bobsen","address1":"711 - 126 Redpath Ave","address2":null,"city":"Toronto","country":"CA","name":"Bob Bobsen","province":"ON","phone":"555-625-1199","zip":"M4S0B5"},"shipping_lines":[{"code":null,"title":"CA Flat Rate Shipping","price":null,"source":"Merchant provided flat rate shipping"}],"line_items":[{"name":"'Maraschino' Black Hat - Test","product_id":"cjzyvxtm407z4rns56tif8job","public_id":"cjzyvxtm407z4rns56tif8job","variant_id":"36619342857","price":8.29,"quantity":1,"requires_shipping":true,"properties":[]}],"total_tax":0,"total_price":0,"total_duties":0,"public_id":"cl1c6rxhl000501mx06608w2q","partner_id":"ckzcypy340001kj1q9ud85fu0","orderNumber":210631,"stripeClientSecrets":null},"errors":[]}}}}},"method":"post","path":"/{RootPathOrders}/V1/submit","servers":[{"url":"http://{{url}}"},{"url":"https://sharpener.shopbonsai.ca"}],"jsonRequestBodyExample":{"customer":{"first_name":"<First name>","last_name":"<Last name>","email":"<Email address>"},"products":[{"public_id":"<product ID>","variant_id":"<product variant ID>","quantity":1}],"shipping_address":{"first_name":"<First name>","last_name":"<Last name>","name":"<Full name>","address1":"<Address line>","address2":"<Optional>","city":"<City name>","country":"<Two-letter Alpha-2 ISO 3166 country code>","province":"<Province>","phone":"<Phone number>","zip":"<Zip code>"},"payment":{"method":"external payment","token":"<Token>","amounts":{"shipping":"<Shipping cost>","taxes":"<Taxes cost>","goods":"<Goods cost>"}},"misc":{"data":{}}},"info":{"title":"Bonsai REST API","description":"Explore Bonsai's API reference documentation.\n\n# Overview\n\nIn order for the API to accept your requests, a few headers are required, as well as using the correct content type.\n\n| Domain | Path | Protocol | Environment | Template name |\n| --- | --- | --- | --- | --- |\n| api.shopbonsai.ca | / | SSL | Production | {BonsaiEndpoint} |\n\nMaking requests without SSL is not allowed.\n\n# Authentication\n\nAll requests are required to contain the following headers.\n\n| Header | Value |\n| --- | --- |\n| Content-Type | application/json |\n| API-Key |  |\n\n**About authentication**  \nRequests are authenticated and authorized by passing along an API Key using HTTP headers. Requests that don’t contain these required headers will return a `401 Unauthorized response.`.\n\nThese credentials will be **supplied to you** in a separate document by your **account manager**\n\n# Testing\n\nIn order to test the **end to end flow**, all requests should be toward the staging environment. You can use [Stripe test tokens](https://stripe.com/docs/testing#testing-interactively) to test the different cases.\n\nPlease contact your account manager to provide you with:\n\n- Test Stripe API public key\n- An API key\n- A Product Partner Feed\n    \n\nPlease let your account manager know about the testing as we actively update our API, and that might impact your testing. We are working on keeping our API backwards-compatible at all times but do not have versioning enabled yet.\n\n# Content-Type\n\nAll request bodies are required to be valid JSON. The API does not accept other formats.\n\n# Rate limiting\n\nNo information at the moment.","version":"1.0.0"},"postman":{"name":"Order - External Payment","description":{"content":"Place an order through Bonsai's API - External payment method.\n\nPartners who have access to our own Product Catalog and charge customers directly could use this endpoint to create/fulfill orders.\n\n## Requirements\n\n⚠️ This endpoint is available to select partners, please reach out to your account manager to discuss the API integration details\n\n- The information in the field `products` must match what was used to validate the product in the checkout request.\n- The information in the field `shipping_address` should match what was used to validate the address in the checkout request.\n- Email should be a valid email address used by the customer\n- Token should link to your own internal order\n    - This token is used to verify the order status in your system for security reasons.\n- Amounts are the costs charged to the customer\n- you can provide any additional data in `misc.data`\n- This endpoint is only available to servers for security reasons\n    \n\n## Errors\n\nErrors are returned with status code 200, containing the error inside the errors array. This is in order to allow greater interoperability with integrators.\n\n| **Reason** | **Code** | **HTTP Code** |\n| --- | --- | --- |\n| Merchant does not ship to country | INTERNATIONAL_SHIPPING_ERROR | 400 Bad Request |\n| Fields are missing from the request | INVALID_INPUT | 400 Bad Request |\n| Not enough inventory | INSUFFICIENT_INVENTORY | 400 Bad Request |\n| Merchant does not ship to country | INTERNATIONAL_SHIPPING_ERROR | 400 Bad Request |\n| Product does not exist | PRODUCT_DOES_NOT_EXIST | 404 Not Found |\n| Variant does not exist | VARIANT_DOES_NOT_EXIST | 404 Not Found |\n| Failed to verify the provided token | PAYMENT_REQUIRED | 402 Payment Required |","type":"text/plain"},"url":{"path":[":RootPathOrders","V1","submit"],"host":["{{baseUrl}}"],"query":[],"variable":[{"disabled":false,"description":{"content":"(Required) ","type":"text/plain"},"type":"any","value":"","key":"RootPathOrders"}]},"header":[{"disabled":false,"description":{"content":"API key provided by your account manager","type":"text/plain"},"key":"API-Key","value":""},{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json"}],"method":"POST","body":{"mode":"raw","raw":"\"\"","options":{"raw":{"language":"json"}}}}}
sidebar_class_name: "post api-method"
info_path: docs/api/bonsai-rest-api
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem"
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Order - External Payment



Place an order through Bonsai's API - External payment method.

Partners who have access to our own Product Catalog and charge customers directly could use this endpoint to create/fulfill orders.

## Requirements

⚠️ This endpoint is available to select partners, please reach out to your account manager to discuss the API integration details

- The information in the field `products` must match what was used to validate the product in the checkout request.
- The information in the field `shipping_address` should match what was used to validate the address in the checkout request.
- Email should be a valid email address used by the customer
- Token should link to your own internal order
    - This token is used to verify the order status in your system for security reasons.
- Amounts are the costs charged to the customer
- you can provide any additional data in `misc.data`
- This endpoint is only available to servers for security reasons
    

## Errors

Errors are returned with status code 200, containing the error inside the errors array. This is in order to allow greater interoperability with integrators.

| **Reason** | **Code** | **HTTP Code** |
| --- | --- | --- |
| Merchant does not ship to country | INTERNATIONAL_SHIPPING_ERROR | 400 Bad Request |
| Fields are missing from the request | INVALID_INPUT | 400 Bad Request |
| Not enough inventory | INSUFFICIENT_INVENTORY | 400 Bad Request |
| Merchant does not ship to country | INTERNATIONAL_SHIPPING_ERROR | 400 Bad Request |
| Product does not exist | PRODUCT_DOES_NOT_EXIST | 404 Not Found |
| Variant does not exist | VARIANT_DOES_NOT_EXIST | 404 Not Found |
| Failed to verify the provided token | PAYMENT_REQUIRED | 402 Payment Required |

<details style={{"marginBottom":"1rem"}} data-collapsed={false} open={true}><summary style={{}}><strong>Path Parameters</strong></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"RootPathOrders","in":"path","schema":{"type":"string"},"required":true}}></ParamsItem></ul></div></details><details style={{"marginBottom":"1rem"}} data-collapsed={false} open={true}><summary style={{}}><strong>Header Parameters</strong></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Content-Type","in":"header","schema":{"type":"string"},"description":"Only allowed content-type","example":"application/json"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"API-Key","in":"header","schema":{"type":"string"},"description":"API key provided by your account manager","example":"{{API Key}}"}}></ParamsItem></ul></div></details><MimeTabs><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><li><div><strong>object</strong></div></li></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

OK

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><li><div><strong>object</strong></div></li></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{}"} language={"json"}></ResponseSamples></TabItem><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"{\n  \"data\": {\n    \"email\": \"bob.bobsen@gmail.com\",\n    \"shipping_address\": {\n      \"first_name\": \"Bob\",\n      \"last_name\": \"Bobsen\",\n      \"address1\": \"711 - 126 Redpath Ave\",\n      \"address2\": null,\n      \"city\": \"Toronto\",\n      \"country\": \"CA\",\n      \"name\": \"Bob Bobsen\",\n      \"province\": \"ON\",\n      \"phone\": \"555-625-1199\",\n      \"zip\": \"M4S0B5\"\n    },\n    \"shipping_lines\": [\n      {\n        \"code\": null,\n        \"title\": \"CA Flat Rate Shipping\",\n        \"price\": null,\n        \"source\": \"Merchant provided flat rate shipping\"\n      }\n    ],\n    \"line_items\": [\n      {\n        \"name\": \"'Maraschino' Black Hat - Test\",\n        \"product_id\": \"cjzyvxtm407z4rns56tif8job\",\n        \"public_id\": \"cjzyvxtm407z4rns56tif8job\",\n        \"variant_id\": \"36619342857\",\n        \"price\": 8.29,\n        \"quantity\": 1,\n        \"requires_shipping\": true,\n        \"properties\": []\n      }\n    ],\n    \"total_tax\": 0,\n    \"total_price\": 0,\n    \"total_duties\": 0,\n    \"public_id\": \"cl1c6rxhl000501mx06608w2q\",\n    \"partner_id\": \"ckzcypy340001kj1q9ud85fu0\",\n    \"orderNumber\": 210631,\n    \"stripeClientSecrets\": null\n  },\n  \"errors\": []\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div>
      