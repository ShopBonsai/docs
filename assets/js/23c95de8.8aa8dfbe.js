"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[513],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,l=d(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,g=u["".concat(s,".").concat(m)]||u[m]||c[m]||i;return n?a.createElement(g,o(o({ref:t},l),{},{components:n})):a.createElement(g,o({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var d={};for(var s in t)hasOwnProperty.call(t,s)&&(d[s]=t[s]);d.originalType=e,d.mdxType="string"==typeof e?e:r,o[1]=d;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},62791:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>d,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const i={title:"Bonsai UI Events",description:"Learn about the Bonsai UI Events and how to use them.",sidebar_position:1},o=void 0,d={unversionedId:"bonsai-ui/checkout/events",id:"bonsai-ui/checkout/events",title:"Bonsai UI Events",description:"Learn about the Bonsai UI Events and how to use them.",source:"@site/docs/bonsai-ui/checkout/events.mdx",sourceDirName:"bonsai-ui/checkout",slug:"/bonsai-ui/checkout/events",permalink:"/docs/bonsai-ui/checkout/events",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Bonsai UI Events",description:"Learn about the Bonsai UI Events and how to use them.",sidebar_position:1},sidebar:"bonsai",previous:{title:"Bonsai Checkout",permalink:"/docs/bonsai-ui/checkout/"},next:{title:"Data",permalink:"/docs/data/"}},s={},p=[{value:"Configuration",id:"configuration",level:2},{value:"Events",id:"events",level:2},{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:2}],l={toc:p};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"Bonsai UI emits events during various stages of the checkout process. You can listen to these events by providing a ",(0,r.kt)("inlineCode",{parentName:"p"},"bonsaiEvents")," object to the configuration object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"bonsaiEvents: {\n  version: 'v1';\n  onBonsaiEvent: (event: BonsaiEvent) => void;\n};\n")),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"bonsaiEvent")," object expects a ",(0,r.kt)("inlineCode",{parentName:"p"},"version")," and an ",(0,r.kt)("inlineCode",{parentName:"p"},"onBonsaiEvent")," callback."),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"version")," field is used to ensure that the events emitted by Bonsai UI are compatible with your integration."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("em",{parentName:"p"},"Please note that additional fields are not considered breaking changes, and will not result in a version bump. Likewise, additional events are also not considered a breaking change. Only changes to existing fields will result in a version bump."))),(0,r.kt)("h2",{id:"events"},"Events"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Event tag"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"shipping_info_entered")),(0,r.kt)("td",{parentName:"tr",align:"left"},'Shipping information has been successfuly entered, and the user has clicked "Continue to payment" button')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"payment_info_entered")),(0,r.kt)("td",{parentName:"tr",align:"left"},'Payment information has been successfuly entered, and the user has clicked "Submit order" button')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"order_completed")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Order has been completed, and the user was redirected to Order Success page")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"product_unavailable")),(0,r.kt)("td",{parentName:"tr",align:"left"},"One or more products are unavailable")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"variant_does_not_exist")),(0,r.kt)("td",{parentName:"tr",align:"left"},"One or more variants do not exist")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"product_does_not_exist")),(0,r.kt)("td",{parentName:"tr",align:"left"},"One or more products do not exist")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"products_price_change")),(0,r.kt)("td",{parentName:"tr",align:"left"},"One or more products have changed price")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"international_shipping_error")),(0,r.kt)("td",{parentName:"tr",align:"left"},"International shipping is not available for one or more products")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"invalid_input")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Invalid input has been provided")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"tax_error")),(0,r.kt)("td",{parentName:"tr",align:"left"},"An error has occured during tax calculation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"taxes_or_duties_error")),(0,r.kt)("td",{parentName:"tr",align:"left"},"An error has occured during taxes or duties calculation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"province_unrecognized")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Province is not recognized")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"province_not_found")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Province is not found")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"payment_method_not_supported")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Payment method is not supported")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"payment_required")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Payment is required")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"out_of_stock")),(0,r.kt)("td",{parentName:"tr",align:"left"},"One or more products are out of stock")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"insufficient_inventory")),(0,r.kt)("td",{parentName:"tr",align:"left"},"One or more products have insufficient inventory")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"other_error")),(0,r.kt)("td",{parentName:"tr",align:"left"},"An error has occured during the checkout process")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"express_checkout_mounted")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Express Checkout button has been rendered")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"express_checkout_started")),(0,r.kt)("td",{parentName:"tr",align:"left"},"User has clicked on the Express Checkout button")))),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"Provided ",(0,r.kt)("inlineCode",{parentName:"p"},"onBonsaiEvent")," callback will be invoked when a Bonsai event has been emitted.\nEach event is tagged with a ",(0,r.kt)("inlineCode",{parentName:"p"},"tag")," property, which you can use to distinguish between different events."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"type BonsaiEvent =\n  | {\n      tag: 'shipping_info_entered';\n      event: {\n        cartId: string;\n        currency: string;\n        cartSubtotal: number;\n        items: Item[];\n        shipping: Shipping;\n      };\n    }\n  | {\n      tag: 'payment_info_entered';\n      event: {\n        cartId: string;\n        currency: string;\n        cartSubtotal: number;\n        items: Item[];\n      };\n    }\n  | {\n      tag: 'order_completed';\n      event: {\n        cartId: string;\n        currency: string;\n        orderId: string;\n        orderSubtotal: number;\n        orderShipping: number;\n        orderSubtotalTax: number;\n        orderDuties: number;\n        orderTotalCustomerCharge: number;\n        items: Item[];\n        paymentMethod: 'card' | 'googlePay' | 'applePay';\n      };\n    }\n  | { tag: 'product_unavailable'; data: { productId: string; variantId: string }[] }\n  | { tag: 'variant_does_not_exist'; data: { productId: string; variantId: string }[] }\n  | { tag: 'product_does_not_exist'; data: { productId: string; variantId: string }[] }\n  | { tag: 'products_price_change'; data: { productId: string; variantId: string }[] }\n  | { tag: 'international_shipping_error'; data: { productId: string; variantId: string }[] }\n  | { tag: 'invalid_input' }\n  | { tag: 'tax_error' }\n  | { tag: 'taxes_or_duties_error' }\n  | { tag: 'province_unrecognized' }\n  | { tag: 'province_not_found' }\n  | { tag: 'payment_method_not_supported' }\n  | { tag: 'payment_required' }\n  | { tag: 'out_of_stock'; data: { productId: string; variantId: string }[] }\n  | { tag: 'insufficient_inventory'; data: { productId: string; variantId: string }[] }\n  | { tag: 'other_error' }\n  | { \n      tag: 'express_checkout_mounted'; \n      data: { paymentMethod: 'googlePay' | 'applePay' }\n    }\n  | { tag: 'express_checkout_started';\n      data: { paymentMethod: 'googlePay' | 'applePay' }\n    };\n\ntype Item = {\n  productId: string;\n  variantId: string;\n  quantity: number;\n  productName: string;\n  brandName: string;\n  merchantName: string;\n  price: number;\n  compareAtPrice?: number;\n};\n\ntype Shipping = {\n  address: Address;\n  email: string;\n  phone: string;\n};\n\ntype Address = {\n  address1: string;\n  address2?: string;\n  city: string;\n  province: string;\n  country: string;\n  firstName: string;\n  lastName: string;\n  zip: string;\n};\n")),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"bonsai.init({\n  ...config, // the rest of the configuration\n  bonsaiEvents: {\n    version: 'v1',\n    onBonsaiEvent: ({ tag, event, data }) => {\n      switch (tag) {\n        case 'shipping_info_entered':\n          console.log('Shipping info entered', event);\n          break;\n        case 'payment_info_entered':\n          console.log('Payment info entered', event);\n          break;\n        case 'order_completed':\n          console.log('Order completed', event);\n          break;\n        case 'insufficient_inventory':\n          console.log('Insufficient invetory for: ', data);\n          break;\n        // ...\n      }\n    },\n  },\n});\n")))}c.isMDXComponent=!0}}]);